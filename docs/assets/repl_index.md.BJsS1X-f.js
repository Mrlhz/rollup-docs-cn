import{d as D}from"./chunks/theme.CeqEnVUd.js";import{t as k,B as T,L as h,a1 as be,V as kt,d as O,o as i,b as p,e as m,F as S,a0 as C,R as b,x as j,_ as V,W as _e,ac as $t,X as Ee,ay as jt,az as It,M as R,g as F,l as I,i as z,c as W}from"./chunks/framework.nT7dnMoH.js";const G={"00":{id:"00",modules:[{code:`// 具名导出
// 有很多种方法可以从 ES2015 模块中
// 导出绑定
export var foo = 1;

export function bar() {
	// 在生成 CommonJS 时
	// 尝试将此更改为 \`foo++\`
	return foo;
}

function baz() {
	return bar();
}

export * from './qux';
export { baz };`,isEntry:!0,name:"main.js"},{code:"export const qux = 'QUX';",isEntry:!1,name:"qux.js"}],options:{output:{exports:"auto",esModule:"if-default-prop"}},title:"具名导出（Named exports）"},"01":{id:"01",modules:[{code:`// 除屑优化
import { cube } from './maths.js';

console.log(cube(5)); // 125`,isEntry:!0,name:"main.js"},{code:`// maths.js

// 这个函数并没有被外部模块使用
// 所以 Rollup 会将它从打包产物中排除掉...
export const square = x => x * x;

// 这个函数被外部模块使用了
// 把这个函数重写为 \`square(x) * x\`
// 看看会发生什么。
export const cube = x => x * x * x;

// 这个“副作用”创建了一个全局变量
// 所以它不会被移除。
window.effect1 = 'created';

const includeEffect = false;
if (includeEffect) {
	// 另一方面来说，这将永远不会被执行
	// 所以会被移除。
	window.effect1 = 'not created';
}`,isEntry:!1,name:"maths.js"}],options:{treeshake:!0},title:"除屑优化（Tree-shaking）"},"02":{id:"02",modules:[{code:`// 默认导出
// 从“入口模块”默认导出的内容会被打包后导出
import answer from './answer.js';

export default () => console.log('the answer is ' + answer);`,isEntry:!0,name:"main.js"},{code:`// 内部默认导出会被
// 转换为变量
export default 42;`,isEntry:!1,name:"answer.js"}],options:{output:{exports:"auto",esModule:"if-default-prop"}},title:"默认导出（Default exports）"},"03":{id:"03",modules:[{code:`// 静态名称空间
// ES6 模块允许你
// 将另一个模块的所有导出都作为命名空间导入...
import * as assert from './assert';

// ...但我们可以静态地
// 将其解析为原始函数定义
assert.equal(1 + 1, 2);`,isEntry:!0,name:"main.js"},{code:`export function equal(a, b, message) {
	if (!message) message = format('%s does not equal %s', a, b);
	if (a != b) throw new Error(message);
}

export function ok(value, message) {
	if (!message) message = format('%s is not truthy', value);
	if (!value) throw new Error(message);
}

export function format(string_, ...arguments_) {
	return string_.replace(/%s/g, () => arguments_.shift());
}`,isEntry:!1,name:"assert.js"}],options:{},title:"静态名称空间"},"04":{id:"04",modules:[{code:`// 动态名称空间
// 在某些情况下
// 直到实际运行代码之前，你不知道哪些代码块将会被导出。
// 在这些情况下
// Rollup 会创建一个用于动态查找的命名空间对象
import * as constants from './constants';

for (const key of Object.keys(constants)) {
	console.log(\`The value of \${key} is \${constants[key]}\`);
}`,isEntry:!0,name:"main.js"},{code:`export const π = 3.141_59;
export const e = 2.718_28;
export const φ = 1.618_03;
export const λ = 1.303_57;`,isEntry:!1,name:"constants.js"}],options:{output:{freeze:"true"}},title:"动态名称空间"},"05":{id:"05",modules:[{code:`// 外部导入
// 你可以将外部模块导入到你的打包产物中 -
// 不用在意那些代码是 ES 模块还是其他兼容格式
import $ from 'jquery';

$('body').html('<h1>Hello world!</h1>');`,isEntry:!0,name:"main.js"}],options:{output:{globals:{jquery:"$",$:"jquery"},interop:"default"}},title:"外部导入"},"06":{id:"06",modules:[{code:`// 动态导入
// Rollup 支持通过动态导入
// 利用系统的导入机制
// 进行自动分块和延迟加载。
import square from './square.js';

// 直接使用一些数学方法
console.log(square(2));

// 动态导入其余部分
import('./maths.js').then(maths => {
	console.log(maths.square(5));
	console.log(maths.cube(5));
});`,isEntry:!0,name:"main.js"},{code:`import square from './square.js';

export { default as square } from './square.js';

export const cube = x => square(x) * x;`,isEntry:!1,name:"maths.js"},{code:`// 在入口块和动态块之间共享的模块
// 将合并到入口块中。
export default x => x * x;`,isEntry:!1,name:"square.js"}],options:{output:{inlineDynamicImports:!1}},title:"动态导入"},"07":{id:"07",modules:[{code:`// 多个入口模块
import hyperCube from './hyperCube.js';

console.log(hyperCube(5));`,isEntry:!0,name:"main.js"},{code:`// 额外的入口模块会创建新的代码块。
import cube from './cube.js';

console.log(cube(5));`,isEntry:!0,name:"otherEntry.js"},{code:`import square from './square.js';

// 两个入口模块都使用的所有内容都将成为一个单独的代码块，
// 由两个入口代码块导入
// 以避免代码重复
export default function cube(x) {
	return square(x) * x;
}`,isEntry:!1,name:"cube.js"},{code:`import cube from './cube.js';

// 这只被一个入口模块导入
// 并与该模块共享一个代码块
export default function hyperCube(x) {
	return cube(x) * x;
}`,isEntry:!1,name:"hyperCube.js"},{code:`// 这也在入口代码块之间共享。
export default function square(x) {
	return x * x;
}`,isEntry:!1,name:"square.js"}],options:{output:{minifyInternalExports:!1,preserveModules:!1}},title:"多个入口模块"},"08":{id:"08",modules:[{code:`// JSX SUPPORT
// Try different jsx.mode and see how it is transformed
import './other.js';
const Foo = ({ world }) => <div>Hello {world}!</div>;

console.log(<Foo world="World" />);`,isEntry:!0,name:"main.js"},{code:`const Foo = () => <div>This is deconflicted!</div>;
console.log(<Foo />);`,isEntry:!1,name:"other.js"}],options:{jsx:{mode:"preserve"}},title:"JSX"}};function se({id:o,loc:e}){return e&&e.file||o}const Vt=/^(?:\/|(?:[A-Za-z]:)?[/\\|])/;function Rt(o){return Vt.test(o)}function Ct(o){const e=/([/\\])[^/\\]*$/.exec(o);return e?o.slice(0,-e[0].length)||"/":"."}const pe=/[/\\]/,ce=/[/\\]$/;function de(...o){let e=o.shift().replace(ce,"").split(pe);for(const a of o){const s=a.replace(ce,"").split(pe);if(Rt(a))e=s;else{for(;s[0]==="."||s[0]==="..";)s.shift()===".."&&e.pop();e.push(...s)}}return e.join("/")}const oe=(o,e,a)=>{if(!o)return!0;const[s,n]=o.split(".").map(Number);return s>e||s===e&&n>=a},Z="rollup.browser.js",ee="bindings_wasm_bg.wasm";function Ft({type:o}){return!1}function H(o,e){return`https://unpkg.com/@rollup/browser${o?`@${o}`:""}/dist/${e}`}function xe(o,e){return`https://rollup-ci-artefacts.s3.amazonaws.com/${o}/${e}`}function Lt({type:o,version:e}){if(o==="pr")return xe(e,Z);if(e){if(oe(e,3,0))return H(e,Z);if(oe(e,1,0))return`https://unpkg.com/rollup@${e}/dist/rollup.browser.js`;throw new Error("The REPL only supports Rollup versions >= 1.0.0.")}return H(void 0,Z)}function Mt({type:o,version:e}){if(o==="pr")return xe(e,ee);if(o==="version")if(e){if(oe(e,4,0))return H(e,ee)}else return H(void 0,ee)}async function Nt(o){const e=Lt(o),a=Mt(o),s=a&&fetch(a).catch(()=>{});return new Promise((n,t)=>{const l=document.createElement("script");l.src=e,l.addEventListener("load",async()=>{s&&await s,n(window.rollup)}),l.addEventListener("error",()=>{t(new Error(o.type==="pr"?`Could not load Rollup from PR #${o.version}.`:`Could not load Rollup from ${e}.`))}),document.querySelector("head").append(l)})}const B=D("rollup",()=>{const o=k({error:!1,instance:null}),e=k(null);async function a(n){try{e.value=n;const t=await Nt(n);Ft(n),o.value={error:!1,instance:t}}catch(t){console.error(t),o.value={error:t,instance:null}}}function s(n){o.value={error:n,instance:null}}return{loaded:o,request:e,requestError:s,requestRollup:a}});function At(o){console.group(se(o)||"general error"),console.warn(o.stack||o.message,{...o}),console.groupEnd()}function me({options:o,rollup:{instance:e}}){return JSON.stringify({o,v:e==null?void 0:e.VERSION})}const te=/^[/\\]/;async function Pt({rollup:{instance:o},modules:e,options:a,setOutput:s}){if(e.length===0||!o)return;console.clear(),console.group(`running Rollup version ${o.VERSION}`);const n=new Map;for(const u of e)n.set(u.name,u);const t=[],l=new Set,r={...a,input:e.filter((u,d)=>d===0||u.isEntry).map(({name:u})=>u),onLog(u,d){t.push([u,d])},plugins:[{buildStart(){l.clear()},load(u){var d;return(d=n.get(u)||n.get(u.replace(te,"")))==null?void 0:d.code},name:"browser-resolve",resolveId(u,d){if(!d)return de("/",u);if(u[0]!==".")return l.add(u),!1;let f=de("/",Ct(d),u);if(n.has(f.replace(te,""))||(f+=".js",n.has(f.replace(te,""))))return f;throw new Error(`Could not resolve '${u}' from '${d}'.`)}}]};console.log("%coptions:","font-weight: bold; color: blue",r);try{const u=await(await o.rollup(r)).generate(r.output||{});console.log("%coutput:","font-weight: bold; color: green",u.output),s({error:null,externalImports:[...l].sort((d,f)=>d<f?-1:1),logs:t,output:u.output})}catch(u){console.log("%cerror:","font-weight: bold; color: red",u,JSON.parse(JSON.stringify(u))),s({error:u,externalImports:[],logs:t,output:[]}),At(u)}console.groupEnd()}const U=D("rollupOutput",()=>{const o=B(),e=A(),a=N(),s=k({error:null,externalImports:[],logs:[],output:[]});let n,t=null,l="";function r(u){if(t){t=u;return}if(clearTimeout(n),u.rollup.error){u.setOutput({error:u.rollup.error,externalImports:[],logs:[],output:[]});return}u.rollup.instance&&(n=setTimeout(async()=>{t=u,await Pt(u),l=me(u);const d=t;t=null,d!==u&&r(d)},l===me(u)?100:0))}return T([()=>o.loaded,()=>e.modules,()=>a.optionsObject],([u,d,f])=>r({modules:d,options:f,rollup:u,setOutput(_){s.value=_}}),{deep:!0}),{output:s}}),qt={number({defaultValue:o,name:e,placeholder:a,required:s,value:n}){return{name:e,placeholder:a,removable:!s.value,type:"number",value:n.value===void 0?o:n.value}},select({defaultValue:o,name:e,options:a,required:s,value:n}){return{name:e,options:a.value,removable:!s.value,type:"select",value:n.value===void 0||!a.value.includes(n.value)?o:n.value}},string({defaultValue:o,name:e,placeholder:a,required:s,value:n}){return{name:e,placeholder:a,removable:!s.value,type:"string",value:n.value===void 0?o:n.value}},"string-mapping"({defaultValue:o,keys:e,name:a,required:s,value:n}){return{keys:e.value,name:a,removable:!s.value,type:"string-mapping",value:n.value===void 0?o:n.value}}},w=h(()=>!0),X=h(()=>!1),Tt=["es","amd","cjs","iife","umd","system"],fe=["es","amd","cjs","system"],Bt=new Set(["amd","umd"]),Ut=new Set(["iife","umd"]),ve=new Set(["amd","cjs","iife","umd"]),he=({required:o,available:e,value:a})=>e.value&&(o.value||a.value!==void 0),N=D("options2",()=>{const o=U(),e=A(),a=h(()=>{var c;return((c=o.output)==null?void 0:c.output.length)>1}),s=h(()=>{const{value:c}=E.value;return c!=null&&Bt.has(c)}),n=h(()=>{const{value:c}=E.value;return c!=null&&Ut.has(c)}),t=h(()=>{const{value:c}=E.value;return c!=null&&ve.has(c)}),l=h(()=>{var c;return((c=o.output)==null?void 0:c.externalImports)||[]}),r=h(()=>le.value.value===!0),u=h(()=>[void 0,!0].includes(ue.value.value)),d=y({defaultValue:"undefined",name:"context"}),f=v({name:"experimentalLogSideEffects"}),_=v({available:()=>s.value,name:"output.amd.autoId"}),x=y({available:_.value,name:"output.amd.basePath"}),P=y({available:s,defaultValue:"define",name:"output.amd.define"}),J=v({available:s,name:"output.amd.forceJsExtensionForImports"}),Oe=y({available:()=>s.value&&!a.value&&!_.value.value,name:"output.amd.id",placeholder:"leave blank for anonymous module"}),we=y({name:"output.banner"}),ke=y({available:w,defaultValue:"[name]-[hash].js",name:"output.chunkFileNames"}),$e=v({name:"output.compact"}),je=v({available:()=>E.value.value==="cjs",defaultValue:!0,name:"output.dynamicImportInCjs"}),Ie=y({available:w,defaultValue:"[name].js",name:"output.entryFileNames"}),Ve=g({available:t,defaultValue:"if-default-prop",name:"output.esModule",options:()=>[!1,!0,"if-default-prop"]}),Re=Jt({defaultValue:0,name:"output.experimentalMinChunkSize"}),Ce=g({available:t,defaultValue:"auto",name:"output.exports",options:()=>["auto","default","named","none"]}),Fe=v({available:n,name:"output.extend"}),ae=v({available:t,defaultValue:!0,name:"output.externalLiveBindings"}),Le=v({available:()=>E.value.value==="es",defaultValue:!0,name:"output.externalImportAttributes"}),Me=v({defaultValue:!0,name:"output.freeze"}),Ne=y({name:"output.footer"}),E=g({defaultValue:"es",name:"output.format",options:()=>K.value.value===!0||a.value?fe:Tt,required:()=>!0}),Ae=v({name:"output.generatedCode.arrowFunctions"}),Pe=v({name:"output.generatedCode.constBindings"}),qe=v({name:"output.generatedCode.objectShorthand"}),Te=g({defaultValue:null,name:"output.generatedCode.preset",options:()=>[null,"es5","es2015"]}),Be=v({defaultValue:!0,name:"output.generatedCode.reservedNamesAsProps"}),Ue=v({name:"output.generatedCode.symbols"}),Je=ye({available:()=>n.value&&l.value.length>0,keys:l,name:"output.globals",required:()=>!0}),Ge=g({defaultValue:"base64",name:"output.hashCharacters",options:()=>["base64","base36","hex"]}),He=v({available:w,defaultValue:!0,name:"output.hoistTransitiveImports"}),De=g({defaultValue:"assert",name:"output.importAttributesKey",options:()=>["with","assert"]}),ze=v({available:()=>["amd","iife","umd","system"].includes(E.value.value),defaultValue:!0,name:"output.indent"}),We=v({available:()=>{const c=e.modules;if(!c)return!1;let $=0;for(const{isEntry:L}of c)if(L&&($++,$>1))return!1;return!0},name:"output.inlineDynamicImports"}),Xe=g({available:()=>{const{value:c}=E.value;return c!=null&&ve.has(c)},defaultValue:"default",name:"output.interop",options:()=>["compat","auto","esModule","default","defaultOnly"]}),Ke=y({name:"output.intro"}),Qe=v({available:w,name:"output.minifyInternalExports"}),Ye=v({available:()=>E.value.value==="umd",name:"output.noConflict"}),Ze=y({available:n,defaultValue:"myBundle",name:"output.name",required:()=>{var c;return((c=o.output.output[0])==null?void 0:c.exports.length)>0}}),et=y({name:"output.outro"}),tt=ye({available:()=>l.value.length>0&&E.value.value!=="iife",keys:l,name:"output.paths"}),K=v({available:()=>{const{value:c}=E.value;return c==null||fe.includes(c)},name:"output.preserveModules"}),nt=y({available:K.value,name:"output.preserveModulesRoot"}),ot=v({available:()=>t.value&&ae.value.value===!1,defaultValue:!0,name:"output.reexportProtoFromExternal"}),st=v({available:w,defaultValue:!0,name:"output.sanitizeFileName"}),Q=v({name:"output.sourcemap"}),at=y({available:Q.value,name:"output.sourcemapBaseUrl"}),lt=v({available:Q.value,name:"output.sourcemapExcludeSources"}),ut=y({available:w,defaultValue:void 0,name:"output.sourcemapFileNames"}),rt=v({available:()=>E.value.value!==void 0&&E.value.value!=="es",defaultValue:!0,name:"output.strict"}),it=v({available:()=>E.value.value==="system",defaultValue:!0,name:"output.systemNullSetters"}),pt=v({name:"output.validate"}),ct=g({available:w,defaultValue:"exports-only",name:"preserveEntrySignatures",options:()=>["strict","allow-extension","exports-only",!1]}),dt=v({defaultValue:!1,name:"shimMissingExports"}),le=g({defaultValue:!1,name:"jsx",options:()=>[!1,!0,"preserve","preserve-react","react","react-jsx"]}),mt=y({available:r,name:"jsx.factory"}),ft=y({available:h(()=>r.value&&Y.value.value!=="automatic"),name:"jsx.fragment"}),vt=y({available:r,name:"jsx.importSource"}),ht=y({available:h(()=>r.value&&Y.value.value==="automatic"),name:"jsx.jsxImportSource"}),Y=g({available:r,defaultValue:"classic",name:"jsx.mode",options:()=>["classic","automatic","preserve"]}),yt=g({available:r,defaultValue:null,name:"jsx.preset",options:()=>[null,"preserve","preserve-react","react","react-jsx"]}),ue=g({defaultValue:!0,name:"treeshake",options:()=>[!1,!0,"smallest","safest","recommended"]}),gt=v({available:u,defaultValue:!0,name:"treeshake.annotations"}),bt=v({available:u,defaultValue:!1,name:"treeshake.correctVarValueBeforeDeclaration"}),_t=g({available:u,defaultValue:!0,name:"treeshake.moduleSideEffects",options:()=>[!1,!0,"no-external"]}),Et=g({available:u,defaultValue:null,name:"treeshake.preset",options:()=>[null,"smallest","safest","recommended"]}),xt=g({available:u,defaultValue:!0,name:"treeshake.propertyReadSideEffects",options:()=>[!1,!0,"always"]}),St=v({available:u,defaultValue:!0,name:"treeshake.tryCatchDeoptimization"}),Ot=v({available:u,defaultValue:!0,name:"treeshake.unknownGlobalSideEffects"}),q=[d,f,le,Y,mt,ft,vt,ht,yt,_,x,P,J,Oe,we,ke,$e,je,Ie,Ve,Re,Ce,Fe,ae,Le,Me,Ne,E,Ae,Pe,qe,Te,Be,Ue,Je,Ge,He,De,ze,We,Xe,Ke,Qe,Ye,Ze,et,tt,K,nt,ot,Q,ut,st,at,lt,rt,pt,ct,it,dt,ue,gt,bt,_t,Et,xt,St,Ot],re=h(()=>q.filter(he).map(c=>qt[c.type](c)));return{additionalAvailableOptions:h(()=>q.filter(c=>c.available.value&&!he(c)).map(({name:c})=>c)),addOption(c){const $=q.find(({name:L})=>L===c);$.value.value=$.defaultValue},options:re,optionsObject:Gt(re),set(c,$){q.find(L=>L.name===c).value.value=$},setAll(c){for(const{name:$,value:L}of q){const wt=$.split(".");let ie,M=c;for(;ie=wt.shift();)M=M==null?void 0:M[ie];L.value=["jsx","treeshake"].includes($)&&typeof M=="object"?!0:M}}}});function v({available:o,defaultValue:e,name:a}){return g({available:o,defaultValue:e||!1,name:a,options:()=>[!1,!0]})}function g({available:o,defaultValue:e,name:a,options:s,required:n}){return{available:typeof o=="function"?h(o):o||w,defaultValue:e,name:a,options:h(s),required:n?h(n):X,type:"select",value:k(void 0)}}function y({available:o,defaultValue:e,name:a,placeholder:s,required:n}){return{available:typeof o=="function"?h(o):o||w,defaultValue:e??"",name:a,placeholder:s||null,required:n?h(n):X,type:"string",value:k(void 0)}}function ye({available:o,keys:e,name:a,required:s}){return{available:o?h(o):w,defaultValue:{},keys:e,name:a,required:s?h(s):X,type:"string-mapping",value:be(void 0)}}function Jt({available:o,defaultValue:e,name:a,placeholder:s,required:n}){return{available:typeof o=="function"?h(o):o||w,defaultValue:e??0,name:a,placeholder:s||null,required:n?h(n):X,type:"number",value:k(void 0)}}function Gt(o){let e=o.value.filter(({value:s})=>s!==void 0);const a=be({});return kt(()=>{const s=o.value.filter(({value:t})=>t!==void 0);if(s.length===e.length&&s.every(({name:t,value:l},r)=>t===e[r].name&&l===e[r].value))return;e=s;const n={};for(const{name:t,value:l}of s){const r=t.split("."),u=r.pop();let d,f=n;for(;d=r.shift();)f[d]===!0&&(f[d]={}),f=f[d]??(f[d]={});f[u]=l}a.value=n},{flush:"post"}),a}const Ht=(o,e)=>o.length===e.length&&o.every((a,s)=>a.name===e[s].name&&a.code===e[s].code&&a.isEntry===e[s].isEntry),A=D("modules",()=>{const o=N(),e=k([]),a=k(null);return T(e,s=>{a.value&&!(G[a.value]&&Ht(s,G[a.value].modules))&&(a.value=null)},{deep:!0}),{modules:e,selectedExample:a,selectExample(s){const{modules:n,options:t}=G[s];e.value=n.map(l=>({...l})),a.value=s,t&&o.setAll(t)},set(s,n){a.value=n,e.value=s}}});async function Dt(){if(typeof window>"u")return;const o=A(),e=N(),a=B(),s=new URLSearchParams(location.search),n=Object.fromEntries(s);try{if(n.shareable){const t=decodeURIComponent(atob(n.shareable)),{modules:l,options:r,example:u}=JSON.parse(t);o.set(l,u),e.setAll("output"in r?r:{output:r})}else if(n.gist){const t=await(await fetch(`https://api.github.com/gists/${n.gist}`,{headers:{Accept:"application/vnd.github.v3+json"},method:"GET"})).json(),l=n.entry?n.entry.split(","):[];o.set([t.files["main.js"]||{content:"",filename:"main.js"},...Object.keys(t.files).filter(r=>r!=="main.js").map(r=>t.files[r])].map(r=>({code:r.content,isEntry:l.includes(r.filename),name:r.filename})),"")}else o.modules.length===0&&o.selectExample("00")}catch(t){console.error(t),o.selectExample("00")}n.pr?/^\d+$/.test(n.pr)?a.requestRollup({type:"pr",version:n.pr}):a.requestError(new Error(`Unexpected pull request number in URL: ${n.pr}`)):!n.version||/^\d+\.\d+\.\d+(-\d+)?$/.test(n.version)?a.requestRollup({type:"version",version:n.version}):a.requestError(new Error(`Unexpected Rollup version in URL: ${n.version}`))}function zt(){const o=A(),e=N(),a=B();T([()=>o.modules,()=>e.optionsObject,()=>o.selectedExample,()=>a.request,()=>{var s;return(s=a.loaded.instance)==null?void 0:s.VERSION}],([s,n,t,l,r])=>{const u={};if((l==null?void 0:l.type)==="pr")u.pr=l.version;else{const x=r||(l==null?void 0:l.version);x&&(u.version=x)}const d=JSON.stringify({example:t,modules:s,options:n});u.shareable=btoa(encodeURIComponent(d));const _=`?${Object.keys(u).map(x=>`${x}=${u[x]}`).join("&")}`;history.replaceState({},"",_)},{deep:!0})}const Wt=["value"],Xt=["value"],Kt=O({__name:"InputHeader",setup(o){const e=A(),a=N(),s=t=>e.selectExample(t.target.value),n=()=>{e.set([{code:"",isEntry:!0,name:"main.js"}],""),a.setAll({})};return(t,l)=>(i(),p("header",null,[m("select",{value:b(e).selectedExample,onInput:s},[l[0]||(l[0]=m("option",{disabled:"",selected:"",value:""},"选择一个例子...",-1)),(i(!0),p(S,null,C(b(G),(r,u)=>(i(),p("option",{key:u,value:u},j(r.title),9,Xt))),128))],40,Wt),m("button",{class:"repl-button start-over",onClick:n},"重新开始")]))}}),Qt=V(Kt,[["__scopeId","data-v-a0922c88"]]),Yt="error",Zt="warn",en=O({__name:"ReplEditor",props:{code:{},moduleName:{},readonly:{type:Boolean}},emits:["update:code"],setup(o,{emit:e}){const a=k(null),s=o,n=e;let t,l,r=s.code;return _e(async()=>{const{createEditor:u,addLogs:d}=await $t(async()=>{const{createEditor:f,addLogs:_}=await import("./chunks/editor.DOcYEuVu.js");return{createEditor:f,addLogs:_}},[]);if(t=d,l=u(a.value,s.code,({changedRanges:f,state:{doc:_}})=>{f.length>0&&(r=_.toString(),n("update:code",_.toString()))},!!s.readonly),T(()=>s.code,f=>{r!==f&&(r=f,l.dispatch({changes:{from:0,insert:f,to:l.state.doc.length}}))}),s.moduleName&&!s.readonly){const f=x=>{const P=x.filter(J=>typeof J[1].pos=="number"&&se(J[1])===`/${s.moduleName}`);l.dispatch({effects:[t.of({messages:P})]})},_=U();T(()=>_.output,({error:x,logs:P})=>{f(x?[[Yt,x]]:P)})}}),Ee(()=>{l==null||l.destroy()}),(u,d)=>(i(),p("div",{ref_key:"editorContainer",ref:a,class:"codemirror-container"},null,512))}}),tn=V(en,[["__scopeId","data-v-e6bbb62c"]]),nn={key:0},on={key:0,class:"repl-icon-minus"},sn={key:1,class:"repl-icon-plus"},an={key:1,class:"module-name"},ln={key:0,class:"entry-module-label"},un=O({__name:"ReplModule",props:{editable:{type:Boolean},editableHeader:{type:Boolean},module:{},showHeader:{type:Boolean}},emits:["remove"],setup(o,{emit:e}){const a=e,s=k(null),n=t=>{var u;const{value:l}=t.target,[r]=l.split(".");(u=s.value)==null||u.setSelectionRange(0,r.length)};return(t,l)=>(i(),p("article",{class:z(["module",{"entry-module":t.module.isEntry}])},[m("header",null,[t.editableHeader?(i(),p("span",nn,[jt(m("input",{ref_key:"input",ref:s,"onUpdate:modelValue":l[0]||(l[0]=r=>t.module.name=r),placeholder:"foo.js",onFocus:n},null,544),[[It,t.module.name]]),m("button",{class:"repl-button remove",onClick:l[1]||(l[1]=r=>a("remove"))},l[4]||(l[4]=[m("span",{class:"label"},"移除",-1),m("span",{class:"repl-icon-cancel"},null,-1)])),m("button",{class:"repl-button toggle-entry",onClick:l[2]||(l[2]=r=>t.module.isEntry=!t.module.isEntry)},[l[5]||(l[5]=m("span",{class:"label"},"(入口 模块)",-1)),t.module.isEntry?(i(),p("span",on)):(i(),p("span",sn))])])):t.showHeader?(i(),p("span",an,[R(j(t.module.name)+" ",1),t.module.isEntry?(i(),p("span",ln,"(入口模块)")):F("",!0)])):F("",!0)]),I(tn,{code:t.module.code,"onUpdate:code":l[3]||(l[3]=r=>t.module.code=r),"module-name":t.module.name,readonly:!t.editable},null,8,["code","module-name","readonly"])],2))}}),Se=V(un,[["__scopeId","data-v-4bb61ca1"]]),rn=O({__name:"ReplInput",setup(o){const e=A();let a=1;const s=k(null),n=l=>e.modules.splice(l,1);function t(){e.modules.push({code:"",isEntry:!1,name:`module_${a++}.js`}),setTimeout(()=>{var r;const l=(r=s.value)==null?void 0:r.querySelectorAll("input");l&&l[l.length-1].focus()})}return(l,r)=>(i(),p(S,null,[I(Qt),m("div",{ref_key:"modulesReference",ref:s,class:"modules"},[(i(!0),p(S,null,C(b(e).modules,(u,d)=>(i(),W(Se,{key:d,module:u,"editable-header":d>0,editable:"","show-header":"",onRemove:f=>n(d)},null,8,["module","editable-header","onRemove"]))),128))],512),m("button",{class:"repl-button new-module",onClick:t},r[0]||(r[0]=[m("span",{class:"repl-icon-plus"},null,-1),R(" 添加模块 ")]))],64))}}),pn=V(rn,[["__scopeId","data-v-b515824c"]]),cn={class:"select"},dn=["onClick"],mn=O({__name:"SelectOption",props:{selected:{},values:{}},emits:["select"],setup(o,{emit:e}){const a=e;return(s,n)=>(i(),p("div",cn,[(i(!0),p(S,null,C(s.values,t=>(i(),p("button",{key:String(t),class:z(["repl-button",{selected:t===s.selected}]),onClick:l=>a("select",t)},j(String(t)),11,dn))),128))]))}}),fn=V(mn,[["__scopeId","data-v-c8f0705c"]]),vn={class:"options-panel"},hn={class:"options"},yn=["href"],gn=["onClick"],bn=["value","placeholder","onInput"],_n=["value","placeholder","onInput"],En=["value","onInput"],xn={key:0,class:"add-option"},Sn=["value"],On=O({__name:"BundleOptions",setup(o){const e=N(),a=s=>`/configuration-options/#${s.toLowerCase().split(".").join("-")}`;return(s,n)=>(i(),p("div",vn,[m("div",hn,[(i(!0),p(S,null,C(b(e).options,t=>(i(),p("section",{key:t.name},[m("h3",null,[m("a",{href:a(t.name)},j(t.name),9,yn),t.removable?(i(),p("button",{key:0,class:"repl-button remove",onClick:l=>b(e).set(t.name,void 0)},n[1]||(n[1]=[m("span",{class:"label"},"移除",-1),m("span",{class:"repl-icon-cancel"},null,-1)]),8,gn)):F("",!0)]),t.type==="select"?(i(),W(fn,{key:0,values:t.options,selected:t.value,onSelect:l=>b(e).set(t.name,l)},null,8,["values","selected","onSelect"])):t.type==="string"?(i(),p("input",{key:1,value:t.value,placeholder:t.placeholder,onInput:l=>b(e).set(t.name,l.target.value)},null,40,bn)):t.type==="number"?(i(),p("input",{key:2,value:t.value,placeholder:t.placeholder,type:"number",min:"0",step:"1",onInput:l=>b(e).set(t.name,Number(l.target.value))},null,40,_n)):t.type==="string-mapping"?(i(!0),p(S,{key:3},C(t.keys,l=>(i(),p("div",{key:l,class:"input-with-label"},[m("input",{value:t.value[l],onInput:r=>b(e).set(t.name,{...t.value,[l]:r.target.value})},null,40,En),m("code",null,"'"+j(l)+"'",1)]))),128)):F("",!0)]))),128))]),b(e).additionalAvailableOptions.length>0?(i(),p("div",xn,[m("select",{onInput:n[0]||(n[0]=t=>{b(e).addOption(t.target.value),t.target.value="_"})},[n[2]||(n[2]=m("option",{disabled:"",selected:"",value:"_"},"添加设置",-1)),(i(!0),p(S,null,C(b(e).additionalAvailableOptions,t=>(i(),p("option",{key:t,value:t},j(t),9,Sn))),128))],32),n[3]||(n[3]=m("span",{class:"repl-icon-plus"},null,-1))])):F("",!0)]))}}),wn=V(On,[["__scopeId","data-v-25363337"]]),kn={class:"message"},$n={key:0},jn=["href"],In={key:0,class:"frame"},ge="https://rollupjs.org",Vn=O({__name:"StatusMessage",props:{isError:{type:Boolean},message:{}},setup(o){const e=o,a=h(()=>{const{loc:n,id:t,frame:l}=e.message,r=se({id:t,loc:n});if(r&&(n||l)){const u=n?` (${n.line}:${n.column})`:"";return`${r}${u}${l?`
${l}`:""}`}return""}),s=n=>n&&n.startsWith(ge);return(n,t)=>(i(),p(S,null,[m("div",kn,[n.isError?(i(),p("span",$n,[t[0]||(t[0]=m("span",{class:"repl-icon icon-error"},null,-1)),m("strong",null,j(" "+n.message.name)+":",1)])):F("",!0),R(" "+j(n.message.message)+" ",1),s(n.message.url)?(i(),p("a",{key:1,href:n.message.url.slice(ge.length),class:z(["link",{error:n.isError}])},t[1]||(t[1]=[R("("),m("span",{class:"link-text"},"link",-1),R(")")]),10,jn)):F("",!0)]),a.value?(i(),p("pre",In,[m("code",null,j(a.value),1)])):F("",!0)],64))}}),ne=V(Vn,[["__scopeId","data-v-48ed82b0"]]),Rn={key:0},Cn={key:2},Fn={class:"log-list"},Ln={key:3},Mn={class:"log-list"},Nn={key:4},An=O({__name:"OutputStatus",setup(o){const e=B(),a=U(),s=h(()=>!(e.loaded.instance||e.loaded.error)),n=h(()=>a.output.error),t=h(()=>a.output.logs),l=h(()=>t.value.some(([r])=>r===Zt));return(r,u)=>(i(),p("div",{class:z(["status",s.value?"waiting":n.value?"error":l.value?"warnings":t.value.length>0?"logs":"success"])},[s.value?(i(),p("span",Rn,u[0]||(u[0]=[m("span",{class:"repl-icon-attention"},null,-1),R(" 加载 Rollup... ")]))):n.value?(i(),W(ne,{key:1,message:n.value,"is-error":""},null,8,["message"])):l.value?(i(),p("span",Cn,[u[1]||(u[1]=m("span",{class:"repl-icon-attention"},null,-1)),u[2]||(u[2]=R(" Rollup completed with warnings: ")),m("ul",Fn,[(i(!0),p(S,null,C(t.value,([,d],f)=>(i(),p("li",{key:f,class:"log"},[I(ne,{message:d},null,8,["message"])]))),128))])])):t.value.length>0?(i(),p("span",Ln,[u[3]||(u[3]=R(" Rollup 执行完成但出现警告： ")),m("ul",Mn,[(i(!0),p(S,null,C(t.value,([,d],f)=>(i(),p("li",{key:f,class:"log"},[I(ne,{message:d},null,8,["message"])]))),128))])])):(i(),p("span",Nn,u[4]||(u[4]=[m("span",{class:"repl-icon-ok"},null,-1),R(" Rollup 执行成功！ ")])))],2))}}),Pn=V(An,[["__scopeId","data-v-5db5f09d"]]),qn=["innerHTML"],Tn=O({__name:"RollupVersion",setup(o){const e=B(),a=t=>`<a href="https://github.com/rollup/rollup/pull/${t}">#${t}</a>`,s=t=>`<a href="https://github.com/rollup/rollup/releases/tag/v${t}">${t}</a>`,n=h(()=>{var u;if(!e.request)return"Loading Rollup …  ";const{type:t,version:l}=e.request,r=(u=e.loaded.instance)==null?void 0:u.VERSION;return t==="local"?r?`本地开发构建 (${r})`:"加载本地开发构建中 …":t==="pr"?r?`拉取请求 ${a(l)} (${r})`:`加载拉取请求中 ${a(l)} …`:r?`Rollup ${s(r)}`:`加载 Rollup ${l||"(latest)"} …`});return(t,l)=>(i(),p("div",{class:"version",innerHTML:n.value},null,8,qn))}}),Bn=V(Tn,[["__scopeId","data-v-4dc58e32"]]),Un={key:0},Jn=O({__name:"ReplOutput",setup(o){const e=U(),a=h(()=>e.output.output.map(s=>({code:"code"in s?s.code:String(s.source),isEntry:!1,name:s.fileName})));return(s,n)=>(i(),p(S,null,[I(Pn),I(wn),I(Bn),b(e).output.error?F("",!0):(i(),p("div",Un,[(i(!0),p(S,null,C(a.value,t=>(i(),W(Se,{key:t.name,module:t,"show-header":b(e).output.output.length>1},null,8,["module","show-header"]))),128))]))],64))}}),Gn={class:"repl"},Hn={class:"left"},Dn={class:"input"},zn={class:"right"},Wn={class:"output"},Xn=O({__name:"ReplMain",setup(o){const e=U();return Dt(),zt(),_e(()=>{var a;(a=document.querySelector('meta[name="viewport"]'))==null||a.setAttribute("content","width=device-width,initial-scale=1,maximum-scale=1")}),Ee(()=>{var a;(a=document.querySelector('meta[name="viewport"]'))==null||a.setAttribute("content","width=device-width,initial-scale=1")}),(a,s)=>(i(),p("div",Gn,[m("div",Hn,[s[0]||(s[0]=m("h2",null,"ES6 模块进入...",-1)),m("div",Dn,[I(pn)])]),m("div",zn,[m("h2",null," ... "+j(b(e).output.output.length>1?"产出分块":"产出包")+" 输出 ",1),m("div",Wn,[I(Jn)])])]))}}),Kn=V(Xn,[["__scopeId","data-v-b555930f"]]),eo=JSON.parse('{"title":"REPL","description":"","frontmatter":{"layout":"home","title":"REPL"},"headers":[],"relativePath":"repl/index.md","filePath":"repl/index.md"}'),Qn={name:"repl/index.md"},to=O({...Qn,setup(o){return(e,a)=>(i(),p("div",null,[I(Kn)]))}});export{eo as __pageData,to as default};
